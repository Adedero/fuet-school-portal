import{_ as b}from"./fc9N2lAZ.js";import{_ as R}from"./Br_2l1z2.js";import{u as B}from"./DmuB_ewQ.js";import{f as C,a1 as g,M as y,a2 as v,X as D,c as _,o,i as m,j as d,k as n,Y as V}from"#entry";const U={key:0},j=C({__name:"faculty-select",props:g({item:{}},{faculty:{default:void 0},facultyModifiers:{},department:{default:void 0},departmentModifiers:{}}),emits:g(["select"],["update:faculty","update:department"]),setup(i,{expose:k}){const{data:r,error:M,status:u,execute:p}=B("/api/general/faculties",{lazy:!0},"$LFDtR5hVR6"),$=y(()=>(r.value??[]).map(e=>({label:e.name,value:e.code})).sort((e,t)=>e.label.localeCompare(t.label))),s=y(()=>(r.value??[]).flatMap(e=>e.departments.map(t=>({label:t.name,value:t.code,faculty:e.name})))),c=v(i,"faculty"),f=v(i,"department");return k({getDepartment:(e,t)=>{if(e==="name")return s.value.find(a=>a.label===t);if(e==="code")return s.value.find(a=>a.value===t);if(e==="faculty")return s.value.find(a=>a.faculty===t)}}),D(async()=>{await p()}),(e,t)=>{const a=b,F=R;return o(),_("div",null,[n(u)==="pending"||n(r)?(o(),_("div",U,[e.item==="faculty"?(o(),m(a,V({key:0,modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=l=>c.value=l),items:n($),loading:n(u)==="pending"},e.$attrs,{"onUpdate:modelValue":t[1]||(t[1]=l=>e.$emit("select",l))}),null,16,["modelValue","items","loading"])):d("",!0),e.item==="department"?(o(),m(a,V({key:1,modelValue:f.value,"onUpdate:modelValue":t[2]||(t[2]=l=>f.value=l),items:n(s),loading:n(u)==="pending"},e.$attrs),null,16,["modelValue","items","loading"])):d("",!0)])):n(M)?(o(),m(F,{key:1,message:`Failed to get ${e.item} data`,"show-retry":"",onRetry:n(p)},null,8,["message","onRetry"])):d("",!0)])}}}),x=Object.assign(j,{__name:"AppFacultySelect"});export{x as _};
