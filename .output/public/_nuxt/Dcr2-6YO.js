import{ae as re,ak as _,aE as ce,aS as fe,a_ as ge,Q as I,ap as M,x as A,I as X,G as C,o as p,w as Q,a as Z,N as b,c as E,k as S,T as ee,i as l,aq as c,h as ae,as as pe,P as se,bj as me,ba as ne,aF as le,aT as $,bk as ve,b as ye,d as R,t as J,bl as oe,bm as he,bn as te,v as H,aA as ie,V as be,bo as U,bp as qe,bq as xe,y as Ie,ah as ze,br as Se}from"#entry";import{d as we,e as Fe}from"./Cy0O2o1w.js";import{L as ke}from"./Jvy9P-lb.js";const Be={slots:{root:"relative inline-flex items-center",base:["w-full rounded-md border-0 appearance-none placeholder:text-dimmed focus:outline-none disabled:cursor-not-allowed disabled:opacity-75","transition-colors"],leading:"absolute inset-y-0 start-0 flex items-center",leadingIcon:"shrink-0 text-dimmed",leadingAvatar:"shrink-0",leadingAvatarSize:"",trailing:"absolute inset-y-0 end-0 flex items-center",trailingIcon:"shrink-0 text-dimmed"},variants:{buttonGroup:{horizontal:{root:"group has-focus-visible:z-[1]",base:"group-not-only:group-first:rounded-e-none group-not-only:group-last:rounded-s-none group-not-last:group-not-first:rounded-none"},vertical:{root:"group has-focus-visible:z-[1]",base:"group-not-only:group-first:rounded-b-none group-not-only:group-last:rounded-t-none group-not-last:group-not-first:rounded-none"}},size:{xs:{base:"px-2 py-1 text-xs gap-1",leading:"ps-2",trailing:"pe-2",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},sm:{base:"px-2.5 py-1.5 text-xs gap-1.5",leading:"ps-2.5",trailing:"pe-2.5",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},md:{base:"px-2.5 py-1.5 text-sm gap-1.5",leading:"ps-2.5",trailing:"pe-2.5",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},lg:{base:"px-3 py-2 text-sm gap-2",leading:"ps-3",trailing:"pe-3",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},xl:{base:"px-3 py-2 text-base gap-2",leading:"ps-3",trailing:"pe-3",leadingIcon:"size-6",leadingAvatarSize:"xs",trailingIcon:"size-6"}},variant:{outline:"text-highlighted bg-default ring ring-inset ring-accented",soft:"text-highlighted bg-elevated/50 hover:bg-elevated focus:bg-elevated disabled:bg-elevated/50",subtle:"text-highlighted bg-elevated ring ring-inset ring-accented",ghost:"text-highlighted bg-transparent hover:bg-elevated focus:bg-elevated disabled:bg-transparent dark:disabled:bg-transparent",none:"text-highlighted bg-transparent"},color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},leading:{true:""},trailing:{true:""},loading:{true:""},highlight:{true:""},type:{file:"file:me-1.5 file:font-medium file:text-muted file:outline-none"}},compoundVariants:[{color:"primary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-primary"},{color:"secondary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-secondary"},{color:"success",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-success"},{color:"info",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-info"},{color:"warning",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-warning"},{color:"error",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-error"},{color:"primary",highlight:!0,class:"ring ring-inset ring-primary"},{color:"secondary",highlight:!0,class:"ring ring-inset ring-secondary"},{color:"success",highlight:!0,class:"ring ring-inset ring-success"},{color:"info",highlight:!0,class:"ring ring-inset ring-info"},{color:"warning",highlight:!0,class:"ring ring-inset ring-warning"},{color:"error",highlight:!0,class:"ring ring-inset ring-error"},{color:"neutral",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-inverted"},{color:"neutral",highlight:!0,class:"ring ring-inset ring-inverted"},{leading:!0,size:"xs",class:"ps-7"},{leading:!0,size:"sm",class:"ps-8"},{leading:!0,size:"md",class:"ps-9"},{leading:!0,size:"lg",class:"ps-10"},{leading:!0,size:"xl",class:"ps-11"},{trailing:!0,size:"xs",class:"pe-7"},{trailing:!0,size:"sm",class:"pe-8"},{trailing:!0,size:"md",class:"pe-9"},{trailing:!0,size:"lg",class:"pe-10"},{trailing:!0,size:"xl",class:"pe-11"},{loading:!0,leading:!0,class:{leadingIcon:"animate-spin"}},{loading:!0,leading:!1,trailing:!0,class:{trailingIcon:"animate-spin"}}],defaultVariants:{size:"md",color:"primary",variant:"outline"}},Ae=["id","type","value","name","placeholder","disabled","required","autocomplete"],He=Object.assign({inheritAttrs:!1},{__name:"NuxtInput",props:{as:{type:null,required:!1},id:{type:String,required:!1},name:{type:String,required:!1},type:{type:null,required:!1,default:"text"},placeholder:{type:String,required:!1},color:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1},required:{type:Boolean,required:!1},autocomplete:{type:null,required:!1,default:"off"},autofocus:{type:Boolean,required:!1},autofocusDelay:{type:Number,required:!1,default:0},disabled:{type:Boolean,required:!1},highlight:{type:Boolean,required:!1},modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},modelModifiers:{type:Object,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},icon:{type:String,required:!1},avatar:{type:Object,required:!1},leading:{type:Boolean,required:!1},leadingIcon:{type:String,required:!1},trailing:{type:Boolean,required:!1},trailingIcon:{type:String,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:String,required:!1}},emits:["update:modelValue","blur","change"],setup(e,{expose:i,emit:s}){const a=e,n=s,m=re(),v=we(a,"modelValue",n,{defaultValue:a.defaultValue}),y=_(),{emitFormBlur:h,emitFormInput:u,emitFormChange:V,size:d,color:j,id:O,name:W,highlight:P,disabled:D,emitFormFocus:K,ariaAttrs:Y}=ce(a,{deferInputValidation:!0}),{orientation:w,size:q}=fe(a),{isLeading:N,isTrailing:T,leadingIconName:t,trailingIconName:r}=ge(a),f=I(()=>q.value||d.value),g=I(()=>M({extend:M(Be),...y.ui?.input||{}})({type:a.type,color:j.value,variant:a.variant,size:f?.value,loading:a.loading,highlight:P.value,leading:N.value||!!a.avatar||!!m.leading,trailing:T.value||!!m.trailing,buttonGroup:w.value})),x=A(null);function z(o){a.modelModifiers?.trim&&(o=o?.trim()??null),(a.modelModifiers?.number||a.type==="number")&&(o=me(o)),a.modelModifiers?.nullify&&(o||=null),v.value=o,u()}function F(o){a.modelModifiers?.lazy||z(o.target.value)}function k(o){const G=o.target.value;a.modelModifiers?.lazy&&z(G),a.modelModifiers?.trim&&(o.target.value=G.trim()),V(),n("change",o)}function B(o){h(),n("blur",o)}function ue(){a.autofocus&&x.value?.focus()}return X(()=>{setTimeout(()=>{ue()},a.autofocusDelay)}),i({inputRef:x}),(o,G)=>(p(),C(l(se),{as:e.as,class:c(g.value.root({class:[a.ui?.root,a.class]}))},{default:Q(()=>[Z("input",ee({id:l(O),ref_key:"inputRef",ref:x,type:e.type,value:l(v),name:l(W),placeholder:e.placeholder,class:g.value.base({class:a.ui?.base}),disabled:l(D),required:e.required,autocomplete:e.autocomplete},{...o.$attrs,...l(Y)},{onInput:F,onBlur:B,onChange:k,onFocus:G[0]||(G[0]=(...de)=>l(K)&&l(K)(...de))}),null,16,Ae),b(o.$slots,"default"),l(N)||e.avatar||m.leading?(p(),E("span",{key:0,class:c(g.value.leading({class:a.ui?.leading}))},[b(o.$slots,"leading",{},()=>[l(N)&&l(t)?(p(),C(ae,{key:0,name:l(t),class:c(g.value.leadingIcon({class:a.ui?.leadingIcon}))},null,8,["name","class"])):e.avatar?(p(),C(pe,ee({key:1,size:a.ui?.leadingAvatarSize||g.value.leadingAvatarSize()},e.avatar,{class:g.value.leadingAvatar({class:a.ui?.leadingAvatar})}),null,16,["size","class"])):S("",!0)])],2)):S("",!0),l(T)||m.trailing?(p(),E("span",{key:1,class:c(g.value.trailing({class:a.ui?.trailing}))},[b(o.$slots,"trailing",{},()=>[l(r)?(p(),C(ae,{key:0,name:l(r),class:c(g.value.trailingIcon({class:a.ui?.trailingIcon}))},null,8,["name","class"])):S("",!0)])],2)):S("",!0)]),_:3},8,["as","class"]))}}),Ee={slots:{root:"",wrapper:"",labelWrapper:"flex content-center items-center justify-between",label:"block font-medium text-default",container:"mt-1 relative",description:"text-muted",error:"mt-2 text-error",hint:"text-muted",help:"mt-2 text-muted"},variants:{size:{xs:{root:"text-xs"},sm:{root:"text-xs"},md:{root:"text-sm"},lg:{root:"text-sm"},xl:{root:"text-base"}},required:{true:{label:"after:content-['*'] after:ms-0.5 after:text-error"}}},defaultVariants:{size:"md"}},$e=["id"],Ve=["id"],je=["id"],Oe=["id"],Xe={__name:"NuxtFormField",props:{as:{type:null,required:!1},name:{type:String,required:!1},errorPattern:{type:null,required:!1},label:{type:String,required:!1},description:{type:String,required:!1},help:{type:String,required:!1},error:{type:[Boolean,String],required:!1},hint:{type:String,required:!1},size:{type:null,required:!1},required:{type:Boolean,required:!1},eagerValidation:{type:Boolean,required:!1},validateOnInputDelay:{type:Number,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1}},setup(e){const i=e,s=re(),a=_(),n=I(()=>M({extend:M(Ee),...a.ui?.formField||{}})({size:i.size,required:i.required})),m=ne(oe,null),v=I(()=>i.error||m?.value?.find(u=>u.name&&(u.name===i.name||i.errorPattern&&u.name.match(i.errorPattern)))?.message),y=A(le()),h=y.value;return $(he,y),$(ve,I(()=>({error:v.value,name:i.name,size:i.size,eagerValidation:i.eagerValidation,validateOnInputDelay:i.validateOnInputDelay,errorPattern:i.errorPattern,hint:i.hint,description:i.description,help:i.help,ariaId:h}))),(u,V)=>(p(),C(l(se),{as:e.as,class:c(n.value.root({class:[i.ui?.root,i.class]}))},{default:Q(()=>[Z("div",{class:c(n.value.wrapper({class:i.ui?.wrapper}))},[e.label||s.label?(p(),E("div",{key:0,class:c(n.value.labelWrapper({class:i.ui?.labelWrapper}))},[ye(l(ke),{for:y.value,class:c(n.value.label({class:i.ui?.label}))},{default:Q(()=>[b(u.$slots,"label",{label:e.label},()=>[R(J(e.label),1)])]),_:3},8,["for","class"]),e.hint||s.hint?(p(),E("span",{key:0,id:`${l(h)}-hint`,class:c(n.value.hint({class:i.ui?.hint}))},[b(u.$slots,"hint",{hint:e.hint},()=>[R(J(e.hint),1)])],10,$e)):S("",!0)],2)):S("",!0),e.description||s.description?(p(),E("p",{key:1,id:`${l(h)}-description`,class:c(n.value.description({class:i.ui?.description}))},[b(u.$slots,"description",{description:e.description},()=>[R(J(e.description),1)])],10,Ve)):S("",!0)],2),Z("div",{class:c([(e.label||!!s.label||e.description||!!s.description)&&n.value.container({class:i.ui?.container})])},[b(u.$slots,"default",{error:v.value}),typeof v.value=="string"&&v.value||s.error?(p(),E("div",{key:0,id:`${l(h)}-error`,class:c(n.value.error({class:i.ui?.error}))},[b(u.$slots,"error",{error:v.value},()=>[R(J(v.value),1)])],10,je)):e.help||s.help?(p(),E("div",{key:1,id:`${l(h)}-help`,class:c(n.value.help({class:i.ui?.help}))},[b(u.$slots,"help",{help:e.help},()=>[R(J(e.help),1)])],10,Oe)):S("",!0)],2)]),_:3},8,["as","class"]))}};function Ne(e){return e.validate&&e.__isYupSchema__}function Ce(e){return e.inner!==void 0}function Me(e){return"schema"in e&&typeof e.coercer=="function"&&typeof e.validator=="function"&&typeof e.refiner=="function"}function Pe(e){return e.validateAsync!==void 0&&e.id!==void 0}function De(e){return e.isJoi===!0}function Ke(e){return"~standard"in e}async function Te(e,i){const s=await i["~standard"].validate(e);return s.issues?{errors:s.issues?.map(a=>({name:a.path?.map(n=>typeof n=="object"?n.key:n).join(".")||"",message:a.message}))||[],result:null}:{errors:null,result:s.value}}async function Ge(e,i){try{return{errors:null,result:await i.validate(e,{abortEarly:!1})}}catch(s){if(Ce(s))return{errors:s.inner.map(n=>({name:n.path??"",message:n.message})),result:null};throw s}}async function Re(e,i){const[s,a]=i.validate(e);return s?{errors:s.failures().map(m=>({message:m.message,name:m.path.join(".")})),result:null}:{errors:null,result:a}}async function Je(e,i){try{return{errors:null,result:await i.validateAsync(e,{abortEarly:!1})}}catch(s){if(De(s))return{errors:s.details.map(n=>({name:n.path.join("."),message:n.message})),result:null};throw s}}function Le(e,i){if(Ke(i))return Te(e,i);if(Pe(i))return Je(e,i);if(Ne(i))return Ge(e,i);if(Me(i))return Re(e,i);throw new Error("Form validation failed: Unsupported form schema")}class L extends Error{formId;errors;children;constructor(i,s,a){super("Form validation exception"),this.formId=i,this.errors=s,this.children=a,Object.setPrototypeOf(this,L.prototype)}}const We={base:""},Ze={__name:"NuxtForm",props:{id:{type:[String,Number],required:!1},schema:{type:null,required:!1},state:{type:Object,required:!0},validate:{type:Function,required:!1},validateOn:{type:Array,required:!1,default(){return["input","blur","change"]}},disabled:{type:Boolean,required:!1},validateOnInputDelay:{type:Number,required:!1,default:300},transform:{type:null,required:!1,default:()=>!0},attach:{type:Boolean,required:!1,default:!0},loadingAuto:{type:Boolean,required:!1,default:!0},class:{type:null,required:!1},onSubmit:{type:Function,required:!1}},emits:["submit","error"],setup(e,{expose:i,emit:s}){const a=e,n=s,m=_(),v=I(()=>M({extend:M(We),...m.ui?.form||{}})),y=a.id??le(),h=Fe(`form-${y}`),u=a.attach&&ne(te,void 0);$(te,h);const V=A(new Map);X(async()=>{h.on(async t=>{t.type==="attach"?V.value.set(t.formId,{validate:t.validate}):t.type==="detach"?V.value.delete(t.formId):a.validateOn?.includes(t.type)&&!q.value&&(t.type!=="input"?await w({name:t.name,silent:!0,nested:!1}):(t.eager||P.has(t.name))&&await w({name:t.name,silent:!0,nested:!1})),t.type==="blur"&&P.add(t.name),(t.type==="change"||t.type==="input"||t.type==="blur"||t.type==="focus")&&W.add(t.name),(t.type==="change"||t.type==="input")&&O.add(t.name)})}),ie(()=>{h.reset()}),X(async()=>{u&&(await be(),u.emit({type:"attach",validate:w,formId:y}))}),ie(()=>{u&&u.emit({type:"detach",formId:y})});const d=A([]);$(oe,d);const j=A({});$(Se,j);const O=H(new Set),W=H(new Set),P=H(new Set);function D(t){return t.map(r=>({...r,id:r?.name?j.value[r.name]?.id:void 0}))}const K=A(null);async function Y(){let t=a.validate?await a.validate(a.state)??[]:[];if(a.schema){const{errors:r,result:f}=await Le(a.state,a.schema);r?t=t.concat(r):K.value=f}return D(t)}async function w(t={silent:!1,nested:!0,transform:!1}){const r=t.name&&!Array.isArray(t.name)?[t.name]:t.name,f=!r&&t.nested?Array.from(V.value.values()).map(({validate:x})=>x(t).then(()=>{}).catch(z=>{if(!(z instanceof L))throw z;return z})):[];if(r){const x=d.value.filter(F=>!r.some(k=>{const B=j.value?.[k]?.pattern;return k===F.name||B&&F.name?.match(B)})),z=(await Y()).filter(F=>r.some(k=>{const B=j.value?.[k]?.pattern;return k===F.name||B&&F.name?.match(B)}));d.value=x.concat(z)}else d.value=await Y();const g=(await Promise.all(f)).filter(x=>x!==void 0);if(d.value.length+g.length>0){if(t.silent)return!1;throw new L(y,d.value,g)}return t.transform&&Object.assign(a.state,K.value),a.state}const q=A(!1);$(qe,U(q));async function N(t){q.value=a.loadingAuto&&!0;const r=t;try{r.data=await w({nested:!0,transform:a.transform}),await a.onSubmit?.(r),O.clear()}catch(f){if(!(f instanceof L))throw f;const g={...r,errors:f.errors,children:f.children};n("error",g)}finally{q.value=!1}}const T=I(()=>a.disabled||q.value);return $(xe,I(()=>({disabled:T.value,validateOnInputDelay:a.validateOnInputDelay}))),i({validate:w,errors:d,setErrors(t,r){r?d.value=d.value.filter(f=>r instanceof RegExp?!(f.name&&r.test(f.name)):f.name!==r).concat(D(t)):d.value=D(t)},async submit(){await N(new Event("submit"))},getErrors(t){return t?d.value.filter(r=>t instanceof RegExp?r.name&&t.test(r.name):r.name===t):d.value},clear(t){t?d.value=d.value.filter(r=>t instanceof RegExp?!(r.name&&t.test(r.name)):r.name!==t):d.value=[]},disabled:T,loading:q,dirty:I(()=>!!O.size),dirtyFields:U(O),blurredFields:U(P),touchedFields:U(W)}),(t,r)=>(p(),C(ze(l(u)?"div":"form"),{id:l(y),class:c(v.value({class:a.class})),onSubmit:Ie(N,["prevent"])},{default:Q(()=>[b(t.$slots,"default",{errors:d.value,loading:q.value})]),_:3},40,["id","class"]))}};export{Ze as _,Xe as a,He as b};
