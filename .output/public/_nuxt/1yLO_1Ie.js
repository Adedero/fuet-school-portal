import{_ as U}from"./J5OPYbuo.js";import{_ as $,a as F,b as R}from"./BIR4NytT.js";import{_ as h}from"./Czq5MQWY.js";import{f as C,Y as B,i as E,q as S,Z as I,c as x,a as o,j as y,y as P,k as e,b as s,w as i,g as T,o as m,a3 as O}from"#entry";import{n as j}from"./Zkazc4B7.js";import J from"./B7_lXCUt.js";import{a as w,V as M}from"./Beq7KfO5.js";import{save as W}from"./edrzr1Sn.js";import{u as Y}from"./BeHaClcf.js";import{u as Z}from"./DQKF3S3D.js";import"./Bmdg00VV.js";import"./BAo_7Th6.js";import"./BuBM793T.js";import"./EiriJ3tm.js";import"./OblAUDa1.js";import"./BViqvsnd.js";import"./CJYZdXUz.js";const D={class:"w-full"},G={class:"lg:max-w-[70%] mx-auto"},H={class:"my-5"},L={key:0},Q={class:"grid md:grid-cols-2 gap-2.5"},X={key:0,class:"flex items-center gap-2.5 justify-between"},ve=C({__name:"index",async setup(ee){let f,N;const{applicationId:u=""}=Y(),K=B(),{data:n,error:v,refresh:V}=([f,N]=E(()=>Z(`/api/users/applicant/applications/${u}`,"$hM69xW_RkK")),f=await f,N(),f),b=S(()=>({firstParentName:n.value?.firstParentName??"",firstParentAddress:n.value?.firstParentAddress??"",firstParentStatus:n.value?.firstParentStatus??"living",secondParentName:n.value?.secondParentName??"",secondParentAddress:n.value?.secondParentAddress??"",secondParentStatus:n.value?.secondParentStatus??"living",nextOfKinName:n.value?.nextOfKinName??"",nextOfKinAddress:n.value?.nextOfKinAddress??"",nextOfKinPhoneNumber:n.value?.nextOfKinPhoneNumber??"",nextOfKinRelationship:n.value?.nextOfKinRelationship??""})),a=I({...b.value}),A=S(()=>JSON.stringify(a)!==JSON.stringify(b.value)),c=async p=>{await W({applicationId:u,state:a,schema:w,toast:K,onSuccess:()=>{p()}})},k=[{label:"Save and Continue",onSelect:async()=>{await c(()=>{O(`/application/portal/${u}/academic-info`)})}},{label:"Save Only",onSelect:async()=>{await c(()=>{V()})}},{label:"Save and Exit",onSelect:async()=>{await c(()=>{O("/application/portal")})}}];return(p,t)=>{const z=U,d=R,r=F,_=h,q=$,g=T;return m(),x("div",D,[o("div",G,[t[14]||(t[14]=o("header",null,[o("h1",{class:"text-xl font-bold"},"Family Information"),o("p",{class:"text-sm muted"}," Please provide accurate information about your parents and next of kin. This information is essential for your application process. ")],-1)),o("section",H,[e(v)?(m(),x("div",L,[s(z,{message:("normalizeException"in p?p.normalizeException:e(j))(e(v)).message,"show-retry":"",onRetry:e(V)},null,8,["message","onRetry"])])):e(n)?(m(),P(q,{key:1,state:e(a),schema:e(w),disabled:e(n).status==="closed"||!!e(n).isSubmitted},{default:i(()=>[o("div",Q,[t[11]||(t[11]=o("div",{class:"md:col-span-2"},[o("p",{class:"text-lg font-semibold"},"Parent 1")],-1)),s(r,{name:"firstParentName",label:"Full Name",required:""},{default:i(()=>[s(d,{modelValue:e(a).firstParentName,"onUpdate:modelValue":t[0]||(t[0]=l=>e(a).firstParentName=l),class:"w-full",size:"lg"},null,8,["modelValue"])]),_:1}),s(r,{name:"firstParentStatus",label:"Status",required:""},{default:i(()=>[s(_,{modelValue:e(a).firstParentStatus,"onUpdate:modelValue":t[1]||(t[1]=l=>e(a).firstParentStatus=l),items:["living","deceased"],class:"w-full",size:"lg"},null,8,["modelValue"])]),_:1}),s(r,{name:"otherNames",label:"Address",required:"",class:"md:col-span-2"},{default:i(()=>[s(d,{modelValue:e(a).firstParentAddress,"onUpdate:modelValue":t[2]||(t[2]=l=>e(a).firstParentAddress=l),class:"w-full",size:"lg"},null,8,["modelValue"])]),_:1}),t[12]||(t[12]=o("div",{class:"mt-5 md:col-span-2"},[o("p",{class:"text-lg font-semibold"},"Parent 2")],-1)),s(r,{name:"secondParentName",label:"Full Name",required:""},{default:i(()=>[s(d,{modelValue:e(a).secondParentName,"onUpdate:modelValue":t[3]||(t[3]=l=>e(a).secondParentName=l),class:"w-full",size:"lg"},null,8,["modelValue"])]),_:1}),s(r,{name:"secondParentStatus",label:"Status",required:""},{default:i(()=>[s(_,{modelValue:e(a).secondParentStatus,"onUpdate:modelValue":t[4]||(t[4]=l=>e(a).secondParentStatus=l),items:["living","deceased"],class:"w-full",size:"lg"},null,8,["modelValue"])]),_:1}),s(r,{name:"otherNames",label:"Address",required:"",class:"md:col-span-2"},{default:i(()=>[s(d,{modelValue:e(a).secondParentAddress,"onUpdate:modelValue":t[5]||(t[5]=l=>e(a).secondParentAddress=l),class:"w-full",size:"lg"},null,8,["modelValue"])]),_:1}),t[13]||(t[13]=o("div",{class:"mt-5 md:col-span-2"},[o("p",{class:"text-lg font-semibold"},"Next of Kin")],-1)),s(r,{name:"nextOfKinName",label:"Full Name",required:""},{default:i(()=>[s(d,{modelValue:e(a).nextOfKinName,"onUpdate:modelValue":t[6]||(t[6]=l=>e(a).nextOfKinName=l),class:"w-full",size:"lg"},null,8,["modelValue"])]),_:1}),s(r,{name:"nextOfKinRelationship",label:"Relationship",required:""},{default:i(()=>[s(d,{modelValue:e(a).nextOfKinRelationship,"onUpdate:modelValue":t[7]||(t[7]=l=>e(a).nextOfKinRelationship=l),class:"w-full",size:"lg"},null,8,["modelValue"])]),_:1}),s(r,{name:"nextOfKinPhoneNumber",label:"Phone Number",required:""},{default:i(()=>[s(d,{modelValue:e(a).nextOfKinPhoneNumber,"onUpdate:modelValue":t[8]||(t[8]=l=>e(a).nextOfKinPhoneNumber=l),class:"w-full",size:"lg"},null,8,["modelValue"])]),_:1}),s(r,{name:"nextOfKinAddress",label:"Address",required:""},{default:i(()=>[s(d,{modelValue:e(a).nextOfKinAddress,"onUpdate:modelValue":t[9]||(t[9]=l=>e(a).nextOfKinAddress=l),class:"w-full",size:"lg"},null,8,["modelValue"])]),_:1})])]),_:1},8,["state","schema","disabled"])):y("",!0)]),e(n)?(m(),x("footer",X,[s(g,{label:"Previous",color:"neutral",variant:"soft",onClick:t[10]||(t[10]=l=>e(J)(e(A),`/application/portal/${e(u)}/personal-info`))}),e(n).status==="closed"||e(n).isSubmitted?(m(),P(g,{key:0,to:`/application/portal/${e(u)}/academic-info`,label:"Next"},null,8,["to"])):(m(),P(e(M),{key:1,items:k}))])):y("",!0)])])}}});export{ve as default};
