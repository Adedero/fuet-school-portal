import{_ as P}from"./Br_2l1z2.js";import{_ as V}from"./sc3yzrxI.js";import{_ as N,a as k}from"./2EICDMI2.js";import{f as S,y as C,C as E,B as p,c as _,j as B,b as o,k as s,w as a,E as z,D as F,x as $,o as w,g as U,d as h,a as g,G as j}from"#entry";import{n as M}from"./Zkazc4B7.js";import{r as R}from"./D1vWfdr7.js";const T={key:0,class:"mb-3"},J=S({__name:"reset-password-form",setup(q){const u=C().query.token?.toString(),t=E({password:"",confirmPassword:""});function x(){t.password="",t.confirmPassword=""}const n=p(null),l=p(!1);async function b(m){if(n.value=null,!u){n.value=new Error("Invalid or expired token. Try again later.");return}const{password:e}=m.data;await j.resetPassword({newPassword:e,token:u},{onError(i){n.value=M(i.error)},onSuccess(){x(),l.value=!0}})}return(m,e)=>{const i=P,c=V,d=k,f=U,v=N,y=$;return w(),_("div",null,[s(n)?(w(),_("div",T,[o(i,{message:s(n).message},null,8,["message"])])):B("",!0),o(v,{schema:s(R),state:s(t),class:"space-y-4",onSubmit:z(b,["prevent"])},{default:a(()=>[o(d,{label:"New Password",name:"password"},{default:a(()=>[o(c,{modelValue:s(t).password,"onUpdate:modelValue":e[0]||(e[0]=r=>s(t).password=r),size:"lg",class:"w-full"},null,8,["modelValue"])]),_:1}),o(d,{label:"Confirm New Password",name:"confirmPassword"},{default:a(()=>[o(c,{modelValue:s(t).confirmPassword,"onUpdate:modelValue":e[1]||(e[1]=r=>s(t).confirmPassword=r),size:"lg",class:"w-full"},null,8,["modelValue"])]),_:1}),o(f,{type:"submit",class:"mt-2 w-full flex-center",size:"lg",icon:"i-lucide:check-circle","loading-auto":""},{default:a(()=>[...e[3]||(e[3]=[h(" Submit ",-1)])]),_:1})]),_:1},8,["schema","state"]),o(y,{open:s(l),"onUpdate:open":e[2]||(e[2]=r=>F(l)?l.value=r:null),title:"Success",close:!1,dismissible:!1,ui:{footer:"justify-end"}},{body:a(()=>[...e[4]||(e[4]=[g("div",{class:"space-y-3"},[g("p",null," Your password has been reset successfully! Sign in now to continue. ")],-1)])]),footer:a(()=>[o(f,{to:"/login",label:"Log in","trailing-icon":"lucide:circle-arrow-right"})]),_:1},8,["open"])])}}});export{J as _};
