import{_ as N}from"./J5OPYbuo.js";import{p as S,_ as k}from"./BGouyBw2.js";import{z as w,_ as h,a as z}from"./BIR4NytT.js";import{f as C,X as E,Z as $,$ as _,c as g,j as B,b as e,k as o,w as t,I as F,a7 as j,m as U,o as P,g as I,d as M,a as b,a0 as R}from"#entry";import{n as T}from"./Zkazc4B7.js";const q=w.object({password:S,confirmPassword:w.string()}).refine(i=>i.password===i.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]}),A={key:0,class:"mb-3"},H=C({__name:"reset-password-form",setup(i){const m=E().query.token?.toString(),a=$({password:"",confirmPassword:""});function x(){a.password="",a.confirmPassword=""}const n=_(null),l=_(!1);async function v(u){if(n.value=null,!m){n.value=new Error("Invalid or expired token. Try again later.");return}const{password:s}=u.data;await R.resetPassword({newPassword:s,token:m},{onError(c){n.value=T(c.error)},onSuccess(){x(),l.value=!0}})}return(u,s)=>{const c=N,d=k,p=z,f=I,V=h,y=U;return P(),g("div",null,[o(n)?(P(),g("div",A,[e(c,{message:o(n).message},null,8,["message"])])):B("",!0),e(V,{schema:o(q),state:o(a),class:"space-y-4",onSubmit:F(v,["prevent"])},{default:t(()=>[e(p,{label:"New Password",name:"password"},{default:t(()=>[e(d,{modelValue:o(a).password,"onUpdate:modelValue":s[0]||(s[0]=r=>o(a).password=r),size:"lg",class:"w-full"},null,8,["modelValue"])]),_:1}),e(p,{label:"Confirm New Password",name:"confirmPassword"},{default:t(()=>[e(d,{modelValue:o(a).confirmPassword,"onUpdate:modelValue":s[1]||(s[1]=r=>o(a).confirmPassword=r),size:"lg",class:"w-full"},null,8,["modelValue"])]),_:1}),e(f,{type:"submit",class:"mt-2 w-full flex-center",size:"lg",icon:"i-lucide:check-circle","loading-auto":""},{default:t(()=>[...s[3]||(s[3]=[M(" Submit ",-1)])]),_:1})]),_:1},8,["schema","state"]),e(y,{open:o(l),"onUpdate:open":s[2]||(s[2]=r=>j(l)?l.value=r:null),title:"Success",close:!1,dismissible:!1,ui:{footer:"justify-end"}},{body:t(()=>[...s[4]||(s[4]=[b("div",{class:"space-y-3"},[b("p",null," Your password has been reset successfully! Sign in now to continue. ")],-1)])]),footer:t(()=>[e(f,{to:"/login",label:"Log in","trailing-icon":"lucide:circle-arrow-right"})]),_:1},8,["open"])])}}});export{H as _};
