import{_ as V}from"./BtPAQVJY.js";import{_ as y}from"./BBqBNx5g.js";import{_ as N,a as k}from"./tvyaI-9O.js";import{f as S,v as C,z,A as p,c as _,j as B,b as s,k as o,w as a,B as E,J as F,s as $,o as w,g as U,d as h,a as g,C as j}from"#entry";import{n as A}from"./Zkazc4B7.js";import{r as M}from"./BBhWB0q8.js";const R={key:0,class:"mb-3"},H=S({__name:"reset-password-form",setup(T){const u=C().query.token?.toString(),t=z({password:"",confirmPassword:""});function x(){t.password="",t.confirmPassword=""}const n=p(null),l=p(!1);async function b(m){if(n.value=null,!u){n.value=new Error("Invalid or expired token. Try again later.");return}const{password:e}=m.data;await j.resetPassword({newPassword:e,token:u},{onError(i){n.value=A(i.error)},onSuccess(){x(),l.value=!0}})}return(m,e)=>{const i=V,c=y,d=k,f=U,v=N,P=$;return w(),_("div",null,[o(n)?(w(),_("div",R,[s(i,{message:o(n).message},null,8,["message"])])):B("",!0),s(v,{schema:o(M),state:o(t),class:"space-y-4",onSubmit:E(b,["prevent"])},{default:a(()=>[s(d,{label:"New Password",name:"password"},{default:a(()=>[s(c,{modelValue:o(t).password,"onUpdate:modelValue":e[0]||(e[0]=r=>o(t).password=r),size:"lg",class:"w-full"},null,8,["modelValue"])]),_:1}),s(d,{label:"Confirm New Password",name:"confirmPassword"},{default:a(()=>[s(c,{modelValue:o(t).confirmPassword,"onUpdate:modelValue":e[1]||(e[1]=r=>o(t).confirmPassword=r),size:"lg",class:"w-full"},null,8,["modelValue"])]),_:1}),s(f,{type:"submit",class:"mt-2 w-full flex-center",size:"lg",icon:"i-lucide:check-circle","loading-auto":""},{default:a(()=>[...e[3]||(e[3]=[h(" Submit ",-1)])]),_:1})]),_:1},8,["schema","state"]),s(P,{open:o(l),"onUpdate:open":e[2]||(e[2]=r=>F(l)?l.value=r:null),title:"Success",close:!1,dismissible:!1,ui:{footer:"justify-end"}},{body:a(()=>[...e[4]||(e[4]=[g("div",{class:"space-y-3"},[g("p",null," Your password has been reset successfully! Sign in now to continue. ")],-1)])]),footer:a(()=>[s(f,{to:"/login",label:"Log in","trailing-icon":"lucide:circle-arrow-right"})]),_:1},8,["open"])])}}});export{H as _};
