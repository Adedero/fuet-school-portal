import{_ as x}from"./BzV1xtw9.js";import{_ as v}from"./C4e-zCCc.js";import{_ as S,a as y}from"./Dcr2-6YO.js";import{f as h,q as k,v as z,x as f,c as p,k as C,b as s,i as o,w as t,y as U,H as $,m as B,o as _,g as E,d as F,a as P,z as A}from"#entry";import{n as M}from"./Zkazc4B7.js";import{c as j}from"./CuTGPIrC.js";const q={key:0,class:"mb-3"},G=h({__name:"change-password-form",setup(H){const m=k(),n=z({currentPassword:"",newPassword:"",confirmNewPassword:""});function g(){n.currentPassword="",n.newPassword="",n.confirmNewPassword=""}const l=f(null),u=f(!1);async function N(d){l.value=null;const{currentPassword:e,newPassword:i}=d.data;await A.changePassword({currentPassword:e,newPassword:i,revokeOtherSessions:!0},{onError(r){l.value=M(r.error)},onSuccess(){g(),u.value=!0,m.setUser(null),m.setSession(null)}})}return(d,e)=>{const i=x,r=v,c=y,w=E,V=S,b=B;return _(),p("div",null,[o(l)?(_(),p("div",q,[s(i,{message:o(l).message},null,8,["message"])])):C("",!0),s(V,{schema:o(j),state:o(n),class:"space-y-4",onSubmit:U(N,["prevent"])},{default:t(()=>[s(c,{label:"Current Password",name:"currentPassword"},{default:t(()=>[s(r,{modelValue:o(n).currentPassword,"onUpdate:modelValue":e[0]||(e[0]=a=>o(n).currentPassword=a),size:"lg",class:"w-full"},null,8,["modelValue"])]),_:1}),s(c,{label:"New Password",name:"newPassword"},{default:t(()=>[s(r,{modelValue:o(n).newPassword,"onUpdate:modelValue":e[1]||(e[1]=a=>o(n).newPassword=a),size:"lg",class:"w-full"},null,8,["modelValue"])]),_:1}),s(c,{label:"Confirm New Password",name:"confirmNewPassword"},{default:t(()=>[s(r,{modelValue:o(n).confirmNewPassword,"onUpdate:modelValue":e[2]||(e[2]=a=>o(n).confirmNewPassword=a),size:"lg",class:"w-full"},null,8,["modelValue"])]),_:1}),s(w,{type:"submit",class:"mt-2 w-full flex-center",size:"lg",icon:"i-lucide:check-circle","loading-auto":""},{default:t(()=>[...e[4]||(e[4]=[F(" Submit ",-1)])]),_:1})]),_:1},8,["schema","state"]),s(b,{open:o(u),"onUpdate:open":e[3]||(e[3]=a=>$(u)?u.value=a:null),title:"Success",close:!1,dismissible:!1,ui:{footer:"justify-end"}},{body:t(()=>[...e[5]||(e[5]=[P("div",{class:"space-y-3"},[P("p",null," Your password has been changed successfully! Sign in now to continue. ")],-1)])]),footer:t(()=>[s(w,{to:"/login",label:"Log in","trailing-icon":"lucide:circle-arrow-right"})]),_:1},8,["open"])])}}});export{G as _};
