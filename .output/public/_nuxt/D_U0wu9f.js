import{_ as x}from"./Br_2l1z2.js";import{_ as S}from"./CEXRc7iu.js";import{_ as v,a as y}from"./CfG1-w7I.js";import{f as h,z as C,C as k,B as f,c as p,j as z,b as s,k as o,w as t,E as B,D as E,x as U,o as _,g as F,d as $,a as P,G as j}from"#entry";import{n as A}from"./Zkazc4B7.js";import{c as M}from"./CrDIcNfC.js";const D={key:0,class:"mb-3"},H=h({__name:"change-password-form",setup(G){const m=C(),n=k({currentPassword:"",newPassword:"",confirmNewPassword:""});function g(){n.currentPassword="",n.newPassword="",n.confirmNewPassword=""}const l=f(null),u=f(!1);async function N(d){l.value=null;const{currentPassword:e,newPassword:i}=d.data;await j.changePassword({currentPassword:e,newPassword:i,revokeOtherSessions:!0},{onError(r){l.value=A(r.error)},onSuccess(){g(),u.value=!0,m.setUser(null),m.setSession(null)}})}return(d,e)=>{const i=x,r=S,c=y,w=F,V=v,b=U;return _(),p("div",null,[o(l)?(_(),p("div",D,[s(i,{message:o(l).message},null,8,["message"])])):z("",!0),s(V,{schema:o(M),state:o(n),class:"space-y-4",onSubmit:B(N,["prevent"])},{default:t(()=>[s(c,{label:"Current Password",name:"currentPassword"},{default:t(()=>[s(r,{modelValue:o(n).currentPassword,"onUpdate:modelValue":e[0]||(e[0]=a=>o(n).currentPassword=a),size:"lg",class:"w-full"},null,8,["modelValue"])]),_:1}),s(c,{label:"New Password",name:"newPassword"},{default:t(()=>[s(r,{modelValue:o(n).newPassword,"onUpdate:modelValue":e[1]||(e[1]=a=>o(n).newPassword=a),size:"lg",class:"w-full"},null,8,["modelValue"])]),_:1}),s(c,{label:"Confirm New Password",name:"confirmNewPassword"},{default:t(()=>[s(r,{modelValue:o(n).confirmNewPassword,"onUpdate:modelValue":e[2]||(e[2]=a=>o(n).confirmNewPassword=a),size:"lg",class:"w-full"},null,8,["modelValue"])]),_:1}),s(w,{type:"submit",class:"mt-2 w-full flex-center",size:"lg",icon:"i-lucide:check-circle","loading-auto":""},{default:t(()=>[...e[4]||(e[4]=[$(" Submit ",-1)])]),_:1})]),_:1},8,["schema","state"]),s(b,{open:o(u),"onUpdate:open":e[3]||(e[3]=a=>E(u)?u.value=a:null),title:"Success",close:!1,dismissible:!1,ui:{footer:"justify-end"}},{body:t(()=>[...e[5]||(e[5]=[P("div",{class:"space-y-3"},[P("p",null," Your password has been changed successfully! Sign in now to continue. ")],-1)])]),footer:t(()=>[s(w,{to:"/login",label:"Log in","trailing-icon":"lucide:circle-arrow-right"})]),_:1},8,["open"])])}}});export{H as _};
