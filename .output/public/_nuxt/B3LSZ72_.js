import{_ as C}from"./Br_2l1z2.js";import{_ as N}from"./BrTgbP-L.js";import{f as $,y as w,A,B as S,X as V,H as B,c as l,a as e,t as f,k as s,b as o,j as R,d as y,w as h,g as T,e as j,G as D,o as u,l as L}from"#entry";import{_ as M}from"./CRVZdzxc.js";import{a as Y}from"./DOVLR_vN.js";function q(n,c=5){if(!n)return"";const[a,i]=n.split("@");return!a||!i?n:`${a.slice(0,3)}${"*".repeat(c)}@${i}`}const F={class:"text-sm text-muted"},G={class:"my-5"},H={key:0},I={key:1},U={key:0},W={class:"mt-4 flex items-center gap-3 justify-between"},X={class:"text-sm text-muted"},Q=$({__name:"index",setup(n){const c=L(),a=w(),i=A(),d=a.query.email?.toString(),r=S(atob(d??"")),{state:m,executeImmediate:_}=Y(async function(){return await D.sendVerificationEmail({email:r.value,callbackURL:"/token-validation"},{onSuccess:()=>{i.add({color:"success",title:"Success",description:"Email sent successfully"})}})},null);return V(()=>{if(!r.value)throw B({statusCode:400,statusMessage:"We could not verifiy your email due to incomplete data. Try signing up again.",fatal:!0})}),(p,t)=>{const v=C,x=N,g=T,k=M,b=j;return u(),l("div",null,[t[5]||(t[5]=e("h1",{class:"text-lg font-semibold"},"Verify Your Email",-1)),e("div",F," You must verify your email address to continue on "+f(s(c).public.appName)+". ",1),e("div",G,[s(m)?.error?(u(),l("div",H,[o(v,{message:s(m)?.error?.message??s(m)?.error?.statusText,"show-retry":"",onRetry:t[0]||(t[0]=E=>s(_)())},null,8,["message"])])):(u(),l("div",I,[e("div",null,[s(r)?(u(),l("p",U,[e("b",null,f(("maskEmail"in p?p.maskEmail:s(q))(s(r))),1)])):R("",!0),o(x,{variant:"subtle",description:`A verification link has been sent to your email. Click on it to\r
              verify your account.`,icon:"lucide:circle-alert",class:"mt-4"})]),e("div",W,[t[2]||(t[2]=e("p",{class:"text-muted text-sm"},"Didn't receive the email?",-1)),o(g,{"loading-auto":"",label:"Resend",onClick:t[1]||(t[1]=E=>s(_)())})])]))]),e("div",null,[o(k,{class:"my-5"}),e("p",X,[t[4]||(t[4]=y(" Are you experiencing any issues? ",-1)),o(b,{to:"/contact",class:"link"},{default:h(()=>[...t[3]||(t[3]=[y(" Contact us. ",-1)])]),_:1})])])])}}});export{Q as default};
