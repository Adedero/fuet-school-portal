import{a as y,b as x,_ as z}from"./Dcr2-6YO.js";import{_ as q}from"./DzFNhZ3O.js";import{p as v,M as c,_ as B}from"./C4e-zCCc.js";import{f as P,s as D,v as U,G as C,o as M,w as o,a as m,b as t,i as a,g as Y,C as F}from"#entry";import{C as f}from"./HZ3APyaO.js";import{z as r}from"./Jvy9P-lb.js";import{n as $}from"./Zkazc4B7.js";const S=r.object({firstName:r.string().trim().nonempty("First name is required."),middleName:r.string().trim().optional(),otherNames:r.string().trim().optional(),lastName:r.string().trim().nonempty("Last name is required."),email:r.email("Email is not valid"),password:v,confirmPassword:r.string(),birthDay:r.number("Birth day is required."),birthMonth:r.string().nonempty("Birth month is required."),birthYear:r.number("Birth year is required").positive("Birth year must be greater than 0").refine(n=>new Date().getFullYear()-n>=c,`You must be at least ${c} years old to continue.`)}).refine(n=>n.password===n.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]}),E={class:"grid md:grid-cols-2 gap-2.5"},I={class:"md:col-span-2 grid sm:grid-cols-3 gap-2.5"},j={class:"flex justify-end gap-2.5 mt-2.5"},k=P({__name:"initiation-form",props:{redirect:{default:()=>{}}},emits:["done","cancel"],setup(n,{emit:b}){const g=b,V=D(),l=U({firstName:"",middleName:"",otherNames:"",lastName:"",email:"",password:"",confirmPassword:"",birthDay:1,birthMonth:"January",birthYear:new Date().getFullYear()-c}),_=async u=>{try{await $fetch("/api/general/applications/initiate",{method:"POST",body:u.data}),g("done",u.data),n.redirect&&await F(n.redirect)}catch(e){V.add({color:"error",title:"Error",description:$(e).message})}};return(u,e)=>{const d=x,i=y,p=q,w=B,N=Y,h=z;return M(),C(h,{state:a(l),schema:a(S),onSubmit:_},{default:o(()=>[m("div",E,[e[11]||(e[11]=m("div",{class:"md:col-span-2"},[m("p",{class:"text-lg font-semibold"},"Name")],-1)),t(i,{name:"firstName",label:"First Name",required:""},{default:o(()=>[t(d,{modelValue:a(l).firstName,"onUpdate:modelValue":e[0]||(e[0]=s=>a(l).firstName=s),size:"lg",class:"w-full"},null,8,["modelValue"])]),_:1}),t(i,{name:"middleName",label:"Middle Name"},{default:o(()=>[t(d,{modelValue:a(l).middleName,"onUpdate:modelValue":e[1]||(e[1]=s=>a(l).middleName=s),size:"lg",class:"w-full"},null,8,["modelValue"])]),_:1}),t(i,{name:"lastName",label:"Last Name",required:""},{default:o(()=>[t(d,{modelValue:a(l).lastName,"onUpdate:modelValue":e[2]||(e[2]=s=>a(l).lastName=s),size:"lg",class:"w-full"},null,8,["modelValue"])]),_:1}),t(i,{name:"otherNames",label:"Other Names"},{default:o(()=>[t(d,{modelValue:a(l).otherNames,"onUpdate:modelValue":e[3]||(e[3]=s=>a(l).otherNames=s),size:"lg",class:"w-full"},null,8,["modelValue"])]),_:1}),e[12]||(e[12]=m("div",{class:"mt-5 md:col-span-2"},[m("p",{class:"text-lg font-semibold"},"Birth Data")],-1)),m("div",I,[t(i,{name:"birthDay",label:"Day of Birth",required:""},{default:o(()=>[t(p,{modelValue:a(l).birthDay,"onUpdate:modelValue":e[4]||(e[4]=s=>a(l).birthDay=s),items:a(f).monthDays(),size:"lg",class:"w-full"},null,8,["modelValue","items"])]),_:1}),t(i,{name:"birthMonth",label:"Month of Birth",required:""},{default:o(()=>[t(p,{modelValue:a(l).birthMonth,"onUpdate:modelValue":e[5]||(e[5]=s=>a(l).birthMonth=s),items:a(f).months().long,size:"lg",class:"w-full"},null,8,["modelValue","items"])]),_:1}),t(i,{name:"birthYear",label:"Day of Birth",required:""},{default:o(()=>[t(p,{modelValue:a(l).birthYear,"onUpdate:modelValue":e[6]||(e[6]=s=>a(l).birthYear=s),items:a(f).allowedYears(),size:"lg",class:"w-full"},null,8,["modelValue","items"])]),_:1})]),e[13]||(e[13]=m("div",{class:"mt-5 md:col-span-2"},[m("p",{class:"text-lg font-semibold"},"Credentials")],-1)),t(i,{name:"email",label:"Email Address",required:"",class:"md:col-span-2"},{default:o(()=>[t(d,{modelValue:a(l).email,"onUpdate:modelValue":e[7]||(e[7]=s=>a(l).email=s),size:"lg",class:"w-full"},null,8,["modelValue"])]),_:1}),t(i,{name:"password",label:"Password",required:""},{default:o(()=>[t(w,{modelValue:a(l).password,"onUpdate:modelValue":e[8]||(e[8]=s=>a(l).password=s),size:"lg",class:"w-full"},null,8,["modelValue"])]),_:1}),t(i,{name:"confirmPassword",label:"Confirm Password",required:""},{default:o(()=>[t(w,{modelValue:a(l).confirmPassword,"onUpdate:modelValue":e[9]||(e[9]=s=>a(l).confirmPassword=s),size:"lg",class:"w-full"},null,8,["modelValue"])]),_:1})]),m("div",j,[t(N,{type:"button",label:"Cancel",color:"neutral",variant:"soft",size:"lg",onClick:e[10]||(e[10]=s=>g("cancel"))}),t(N,{type:"submit",label:"Submit",size:"lg","loading-auto":""})])]),_:1},8,["state","schema"])}}}),K=Object.assign(k,{__name:"ApplicationInitiationForm"});export{K as _};
