import{_ as E}from"./BtPAQVJY.js";import{_ as N}from"./DrzXPWwZ.js";import{f as $,v as w,y as A,A as S,K as V,D as R,c as l,a as e,t as f,k as s,b as o,j as h,d as y,w as B,g as T,e as D,C as j,o as u,l as L}from"#entry";import{_ as M}from"./BzoIj2I_.js";import{u as Y}from"./BaSubFUB.js";function q(n,c=5){if(!n)return"";const[i,a]=n.split("@");return!i||!a?n:`${i.slice(0,3)}${"*".repeat(c)}@${a}`}const F={class:"text-sm text-muted"},I={class:"my-5"},K={key:0},U={key:1},W={key:0},z={class:"mt-4 flex items-center gap-3 justify-between"},G={class:"text-sm text-muted"},X=$({__name:"index",setup(n){const c=L(),i=w(),a=A(),d=i.query.email?.toString(),r=S(atob(d??"")),{state:m,executeImmediate:_}=Y(async function(){return await j.sendVerificationEmail({email:r.value,callbackURL:"/token-validation"},{onSuccess:()=>{a.add({color:"success",title:"Success",description:"Email sent successfully"})}})},null);return V(()=>{if(!r.value)throw R({statusCode:400,statusMessage:"We could not verifiy your email due to incomplete data. Try signing up again.",fatal:!0})}),(p,t)=>{const v=E,x=N,g=T,k=M,b=D;return u(),l("div",null,[t[5]||(t[5]=e("h1",{class:"text-lg font-semibold"},"Verify Your Email",-1)),e("div",F," You must verify your email address to continue on "+f(s(c).public.appName)+". ",1),e("div",I,[s(m)?.error?(u(),l("div",K,[o(v,{message:s(m)?.error?.message??s(m)?.error?.statusText,"show-retry":"",onRetry:t[0]||(t[0]=C=>s(_)())},null,8,["message"])])):(u(),l("div",U,[e("div",null,[s(r)?(u(),l("p",W,[e("b",null,f(("maskEmail"in p?p.maskEmail:s(q))(s(r))),1)])):h("",!0),o(x,{variant:"subtle",description:`A verification link has been sent to your email. Click on it to
              verify your account.`,icon:"lucide:circle-alert",class:"mt-4"})]),e("div",z,[t[2]||(t[2]=e("p",{class:"text-muted text-sm"},"Didn't receive the email?",-1)),o(g,{"loading-auto":"",label:"Resend",onClick:t[1]||(t[1]=C=>s(_)())})])]))]),e("div",null,[o(k,{class:"my-5"}),e("p",G,[t[4]||(t[4]=y(" Are you experiencing any issues? ",-1)),o(b,{to:"/contact",class:"link"},{default:B(()=>[...t[3]||(t[3]=[y(" Contact us. ",-1)])]),_:1})])])])}}});export{X as default};
