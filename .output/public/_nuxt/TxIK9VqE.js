import{_ as C}from"./Bk3w5A3a.js";import{_ as N}from"./BIAE9Gu1.js";import{f as $,Y as w,Z as S,a0 as V,x as A,a2 as R,c as l,a as e,t as f,m as s,b as o,l as h,d as y,w as B,g as T,e as Y,a1 as D,o as u,a3 as L}from"#entry";import{_ as M}from"./BI9n0Uyg.js";import{u as j}from"./Cm5taMpD.js";function q(n,c=5){if(!n)return"";const[a,i]=n.split("@");return!a||!i?n:`${a.slice(0,3)}${"*".repeat(c)}@${i}`}const F={class:"text-sm text-muted"},I={class:"my-5"},U={key:0},W={key:1},Z={key:0},z={class:"mt-4 flex items-center gap-3 justify-between"},G={class:"text-sm text-muted"},Q=$({__name:"index",setup(n){const c=L(),a=w(),i=S(),d=a.query.email?.toString(),r=V(atob(d??"")),{state:m,executeImmediate:_}=j(async function(){return await D.sendVerificationEmail({email:r.value,callbackURL:"/token-validation"},{onSuccess:()=>{i.add({color:"success",title:"Success",description:"Email sent successfully"})}})},null);return A(()=>{if(!r.value)throw R({statusCode:400,statusMessage:"We could not verifiy your email due to incomplete data. Try signing up again.",fatal:!0})}),(p,t)=>{const v=C,x=N,g=T,k=M,b=Y;return u(),l("div",null,[t[5]||(t[5]=e("h1",{class:"text-lg font-semibold"},"Verify Your Email",-1)),e("div",F," You must verify your email address to continue on "+f(s(c).public.appName)+". ",1),e("div",I,[s(m)?.error?(u(),l("div",U,[o(v,{message:s(m)?.error?.message??s(m)?.error?.statusText,"show-retry":"",onRetry:t[0]||(t[0]=E=>s(_)())},null,8,["message"])])):(u(),l("div",W,[e("div",null,[s(r)?(u(),l("p",Z,[e("b",null,f(("maskEmail"in p?p.maskEmail:s(q))(s(r))),1)])):h("",!0),o(x,{variant:"subtle",description:`A verification link has been sent to your email. Click on it to
              verify your account.`,icon:"lucide:circle-alert",class:"mt-4"})]),e("div",z,[t[2]||(t[2]=e("p",{class:"text-muted text-sm"},"Didn't receive the email?",-1)),o(g,{"loading-auto":"",label:"Resend",onClick:t[1]||(t[1]=E=>s(_)())})])]))]),e("div",null,[o(k,{class:"my-5"}),e("p",G,[t[4]||(t[4]=y(" Are you experiencing any issues? ",-1)),o(b,{to:"/contact",class:"link"},{default:B(()=>[...t[3]||(t[3]=[y(" Contact us. ",-1)])]),_:1})])])])}}});export{Q as default};
