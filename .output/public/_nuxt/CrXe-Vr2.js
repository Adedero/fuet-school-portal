import{_ as ee}from"./Bk3w5A3a.js";import{L as A,z as N,_ as ae,a as te,b as se}from"./BoK5ptM-.js";import{p as re,_ as oe}from"./Df-dUrmE.js";import{f as M,q as le,s as q,v as ie,x as ne,y as ue,z as x,o as v,w as m,b as f,m as e,P as E,A as _,B as de,C as J,D as Q,E as ce,G as P,l as V,H as T,I as me,J as W,K as X,L as fe,M as pe,N as U,O as ve,Q as be,R as ye,S as ge,T as he,U as we,V as xe,W as j,a as Y,c as F,X as w,i as D,d as z,t as G,Y as ke,Z as qe,$ as Ce,a0 as Ve,e as _e,g as Se,a1 as L,a2 as O,a3 as Ie,a4 as K}from"#entry";import{i as H}from"./CgCiKd0C.js";import{u as Fe}from"./JFkHPvSu.js";import{i as ze,g as Be,w as Me,f as Ee}from"./nRU2jip5.js";import{V as Re}from"./yuR17kJA.js";import{n as $e}from"./Zkazc4B7.js";import{u as Ne}from"./CEtmSqIU.js";var Ke=M({__name:"RovingFocusItem",props:{tabStopId:{type:String,required:!1},focusable:{type:Boolean,required:!1,default:!0},active:{type:Boolean,required:!1},allowShiftKey:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(r){const p=r,a=ze(),n=le(),h=q(()=>p.tabStopId||n),i=q(()=>a.currentTabStopId.value===h.value),{getItems:u,CollectionItem:d}=ie();ne(()=>{p.focusable&&a.onFocusableItemAdd()}),ue(()=>{p.focusable&&a.onFocusableItemRemove()});function b(t){if(t.key==="Tab"&&t.shiftKey){a.onItemShiftTab();return}if(t.target!==t.currentTarget)return;const o=Be(t,a.orientation.value,a.dir.value);if(o!==void 0){if(t.metaKey||t.ctrlKey||t.altKey||!p.allowShiftKey&&t.shiftKey)return;t.preventDefault();let l=[...u().map(c=>c.ref).filter(c=>c.dataset.disabled!=="")];if(o==="last")l.reverse();else if(o==="prev"||o==="next"){o==="prev"&&l.reverse();const c=l.indexOf(t.currentTarget);l=a.loop.value?Me(l,c+1):l.slice(c+1)}de(()=>Ee(l))}}return(t,o)=>(v(),x(e(d),null,{default:m(()=>[f(e(E),{tabindex:i.value?0:-1,"data-orientation":e(a).orientation.value,"data-active":t.active?"":void 0,"data-disabled":t.focusable?void 0:"",as:t.as,"as-child":t.asChild,onMousedown:o[0]||(o[0]=l=>{t.focusable?e(a).onItemFocus(h.value):l.preventDefault()}),onFocus:o[1]||(o[1]=l=>e(a).onItemFocus(h.value)),onKeydown:b},{default:m(()=>[_(t.$slots,"default")]),_:3},8,["tabindex","data-orientation","data-active","data-disabled","as","as-child"])]),_:3}))}}),Te=Ke;const[Ae,ia]=J("CheckboxGroupRoot");function B(r){return r==="indeterminate"}function Z(r){return B(r)?"indeterminate":r?"checked":"unchecked"}const[Pe,Ue]=J("CheckboxRoot");var je=M({inheritAttrs:!1,__name:"CheckboxRoot",props:{defaultValue:{type:[Boolean,String],required:!1},modelValue:{type:[Boolean,String,null],required:!1,default:void 0},disabled:{type:Boolean,required:!1},value:{type:null,required:!1,default:"on"},id:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue"],setup(r,{emit:p}){const a=r,n=p,{forwardRef:h,currentElement:i}=Q(),u=Ae(null),d=ce(a,"modelValue",n,{defaultValue:a.defaultValue,passive:a.modelValue===void 0}),b=q(()=>u?.disabled.value||a.disabled),t=q(()=>P(u?.modelValue.value)?d.value==="indeterminate"?"indeterminate":d.value:H(u.modelValue.value,a.value));function o(){if(P(u?.modelValue.value))d.value=B(d.value)?!0:!d.value;else{const s=[...u.modelValue.value||[]];if(H(s,a.value)){const k=s.findIndex(C=>fe(C,a.value));s.splice(k,1)}else s.push(a.value);u.modelValue.value=s}}const l=Fe(i),c=q(()=>a.id&&i.value?document.querySelector(`[for="${a.id}"]`)?.innerText:void 0);return Ue({disabled:b,state:t}),(s,k)=>(v(),x(X(e(u)?.rovingFocus.value?e(Te):e(E)),T(s.$attrs,{id:s.id,ref:e(h),role:"checkbox","as-child":s.asChild,as:s.as,type:s.as==="button"?"button":void 0,"aria-checked":e(B)(t.value)?"mixed":t.value,"aria-required":s.required,"aria-label":s.$attrs["aria-label"]||c.value,"data-state":e(Z)(t.value),"data-disabled":b.value?"":void 0,disabled:b.value,focusable:e(u)?.rovingFocus.value?!b.value:void 0,onKeydown:me(W(()=>{},["prevent"]),["enter"]),onClick:o}),{default:m(()=>[_(s.$slots,"default",{modelValue:e(d),state:t.value}),e(l)&&s.name&&!e(u)?(v(),x(e(Re),{key:0,type:"checkbox",checked:!!t.value,name:s.name,value:s.value,disabled:b.value,required:s.required},null,8,["checked","name","value","disabled","required"])):V("v-if",!0)]),_:3},16,["id","as-child","as","type","aria-checked","aria-required","aria-label","data-state","data-disabled","disabled","focusable","onKeydown"]))}}),De=je,Ge=M({__name:"CheckboxIndicator",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(r){const{forwardRef:p}=Q(),a=Pe();return(n,h)=>(v(),x(e(pe),{present:n.forceMount||e(B)(e(a).state.value)||e(a).state.value===!0},{default:m(()=>[f(e(E),T({ref:e(p),"data-state":e(Z)(e(a).state.value),"data-disabled":e(a).disabled.value?"":void 0,style:{pointerEvents:"none"},"as-child":n.asChild,as:n.as},n.$attrs),{default:m(()=>[_(n.$slots,"default")]),_:3},16,["data-state","data-disabled","as-child","as"])]),_:3},8,["present"]))}}),Le=Ge;const Oe={slots:{root:"relative flex items-start",container:"flex items-center",base:"rounded-sm ring ring-inset ring-accented overflow-hidden focus-visible:outline-2 focus-visible:outline-offset-2",indicator:"flex items-center justify-center size-full text-inverted",icon:"shrink-0 size-full",wrapper:"w-full",label:"block font-medium text-default",description:"text-muted"},variants:{color:{primary:{base:"focus-visible:outline-primary",indicator:"bg-primary"},secondary:{base:"focus-visible:outline-secondary",indicator:"bg-secondary"},success:{base:"focus-visible:outline-success",indicator:"bg-success"},info:{base:"focus-visible:outline-info",indicator:"bg-info"},warning:{base:"focus-visible:outline-warning",indicator:"bg-warning"},error:{base:"focus-visible:outline-error",indicator:"bg-error"},neutral:{base:"focus-visible:outline-inverted",indicator:"bg-inverted"}},variant:{list:{root:""},card:{root:"border border-muted rounded-lg"}},indicator:{start:{root:"flex-row",wrapper:"ms-2"},end:{root:"flex-row-reverse",wrapper:"me-2"},hidden:{base:"sr-only",wrapper:"text-center"}},size:{xs:{base:"size-3",container:"h-4",wrapper:"text-xs"},sm:{base:"size-3.5",container:"h-4",wrapper:"text-xs"},md:{base:"size-4",container:"h-5",wrapper:"text-sm"},lg:{base:"size-4.5",container:"h-5",wrapper:"text-sm"},xl:{base:"size-5",container:"h-6",wrapper:"text-base"}},required:{true:{label:"after:content-['*'] after:ms-0.5 after:text-error"}},disabled:{true:{base:"cursor-not-allowed opacity-75",label:"cursor-not-allowed opacity-75",description:"cursor-not-allowed opacity-75"}},checked:{true:""}},compoundVariants:[{size:"xs",variant:"card",class:{root:"p-2.5"}},{size:"sm",variant:"card",class:{root:"p-3"}},{size:"md",variant:"card",class:{root:"p-3.5"}},{size:"lg",variant:"card",class:{root:"p-4"}},{size:"xl",variant:"card",class:{root:"p-4.5"}},{color:"primary",variant:"card",class:{root:"has-data-[state=checked]:border-primary"}},{color:"secondary",variant:"card",class:{root:"has-data-[state=checked]:border-secondary"}},{color:"success",variant:"card",class:{root:"has-data-[state=checked]:border-success"}},{color:"info",variant:"card",class:{root:"has-data-[state=checked]:border-info"}},{color:"warning",variant:"card",class:{root:"has-data-[state=checked]:border-warning"}},{color:"error",variant:"card",class:{root:"has-data-[state=checked]:border-error"}},{color:"neutral",variant:"card",class:{root:"has-data-[state=checked]:border-inverted"}},{variant:"card",disabled:!0,class:{root:"cursor-not-allowed opacity-75"}}],defaultVariants:{size:"md",color:"primary",variant:"list",indicator:"start"}},He=Object.assign({inheritAttrs:!1},{__name:"NuxtCheckbox",props:U({as:{type:null,required:!1},label:{type:String,required:!1},description:{type:String,required:!1},color:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1},indicator:{type:null,required:!1},icon:{type:String,required:!1},indeterminateIcon:{type:String,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},disabled:{type:Boolean,required:!1},required:{type:Boolean,required:!1},name:{type:String,required:!1},value:{type:null,required:!1},id:{type:String,required:!1},defaultValue:{type:[Boolean,String],required:!1}},{modelValue:{type:[Boolean,String],default:void 0},modelModifiers:{}}),emits:U(["change"],["update:modelValue"]),setup(r,{emit:p}){const a=r,n=ve(),h=p,i=be(r,"modelValue",{type:[Boolean,String],default:void 0}),u=ye(),d=ge(he(a,"required","value","defaultValue")),{id:b,emitFormChange:t,emitFormInput:o,size:l,color:c,name:s,disabled:k,ariaAttrs:C}=we(a),S=b.value??xe(),y=q(()=>j({extend:j(Oe),...u.ui?.checkbox||{}})({size:l.value,color:c.value,variant:a.variant,indicator:a.indicator,required:a.required,disabled:k.value}));function R(g){const I=new Event("change",{target:{value:g}});h("change",I),t(),o()}return(g,I)=>(v(),x(e(E),{as:!r.variant||r.variant==="list"?r.as:e(A),class:w(y.value.root({class:[a.ui?.root,a.class]}))},{default:m(()=>[Y("div",{class:w(y.value.container({class:a.ui?.container}))},[f(e(De),T({id:e(S)},{...e(d),...g.$attrs,...e(C)},{modelValue:i.value,"onUpdate:modelValue":[I[0]||(I[0]=$=>i.value=$),R],name:e(s),disabled:e(k),class:y.value.base({class:a.ui?.base})}),{default:m(({modelValue:$})=>[f(e(Le),{class:w(y.value.indicator({class:a.ui?.indicator}))},{default:m(()=>[$==="indeterminate"?(v(),x(D,{key:0,name:r.indeterminateIcon||e(u).ui.icons.minus,class:w(y.value.icon({class:a.ui?.icon}))},null,8,["name","class"])):(v(),x(D,{key:1,name:r.icon||e(u).ui.icons.check,class:w(y.value.icon({class:a.ui?.icon}))},null,8,["name","class"]))]),_:2},1032,["class"])]),_:1},16,["id","modelValue","name","disabled","class"])],2),r.label||n.label||r.description||n.description?(v(),F("div",{key:0,class:w(y.value.wrapper({class:a.ui?.wrapper}))},[r.label||n.label?(v(),x(X(!r.variant||r.variant==="list"?e(A):"p"),{key:0,for:e(S),class:w(y.value.label({class:a.ui?.label}))},{default:m(()=>[_(g.$slots,"label",{label:r.label},()=>[z(G(r.label),1)])]),_:3},8,["for","class"])):V("",!0),r.description||n.description?(v(),F("p",{key:1,class:w(y.value.description({class:a.ui?.description}))},[_(g.$slots,"description",{description:r.description},()=>[z(G(r.description),1)])],2)):V("",!0)],2)):V("",!0)]),_:3},8,["as","class"]))}}),Je=N.object({email:N.email("Email is not valid"),password:re,rememberMe:N.boolean().optional()}),Qe={key:0,class:"mb-3"},We={class:"flex items-center gap-2 justify-between"},na=M({__name:"login-form",setup(r){const p=Ie(),a=ke(),n=Ne(),h=qe(),i=Ce({email:"",password:"",rememberMe:!0});function u(){i.email="",i.password="",i.rememberMe=!0}const d=Ve(null);async function b(t){d.value=null;const o=btoa(t.data.email);await L.signIn.email(t.data,{onError(l){d.value=$e(l.error)},async onSuccess(){u();const l=await L.getSession();if(!l.data)throw O({status:500,statusMessage:p.public.defaultErrorMsg,fatal:!0});n.setSession(l.data.session),n.setUser(l.data.user);const{redirect:c}=a.query;if(c){await K(c.toString());return}if(!l.data?.user.emailVerified){await K({name:"email-verification",query:{email:o}});return}const s=l.data?.user.role;if(!s)throw O({status:500,statusMessage:p.public.defaultErrorMsg,fatal:!0});switch(s){case"applicant":await K("/application/portal");break;case"student":alert(s);break;case"staff":alert(s);break;case"admin":alert(s);break;default:h.add({color:"error",title:"Error",description:"runtimeConfig.public.defaultErrorMsg"});break}}})}return(t,o)=>{const l=ee,c=se,s=te,k=oe,C=He,S=_e,y=Se,R=ae;return v(),F("div",null,[e(d)?(v(),F("div",Qe,[f(l,{message:e(d).message},null,8,["message"])])):V("",!0),f(R,{schema:e(Je),state:e(i),class:"space-y-4",onSubmit:W(b,["prevent"])},{default:m(()=>[f(s,{label:"Email",name:"email",required:""},{default:m(()=>[f(c,{modelValue:e(i).email,"onUpdate:modelValue":o[0]||(o[0]=g=>e(i).email=g),size:"lg",class:"w-full"},null,8,["modelValue"])]),_:1}),f(s,{label:"Password",name:"password",required:""},{default:m(()=>[f(k,{modelValue:e(i).password,"onUpdate:modelValue":o[1]||(o[1]=g=>e(i).password=g),size:"lg",class:"w-full"},null,8,["modelValue"])]),_:1}),Y("div",We,[f(s,{name:"rememberMe"},{default:m(()=>[f(C,{modelValue:e(i).rememberMe,"onUpdate:modelValue":o[2]||(o[2]=g=>e(i).rememberMe=g),label:"Remember me"},null,8,["modelValue"])]),_:1}),f(S,{to:"/forgot-password",class:"link text-sm"},{default:m(()=>[...o[3]||(o[3]=[z(" Forgot password ",-1)])]),_:1})]),f(y,{type:"submit",class:"mt-2 w-full flex-center",size:"lg",icon:"i-lucide:log-in","loading-auto":""},{default:m(()=>[...o[4]||(o[4]=[z(" Submit ",-1)])]),_:1})]),_:1},8,["schema","state"])])}}});export{na as _};
