import{_ as C}from"./BzV1xtw9.js";import{_ as N}from"./CL73yllG.js";import{f as $,n as w,s as A,x as S,I as V,A as B,c as l,a as e,t as f,i as s,b as o,k as R,d as y,w as h,g as T,e as D,z as I,o as u,B as L}from"#entry";import{_ as M}from"./COu7Z6cq.js";import{u as Y}from"./Cy0O2o1w.js";function j(n,c=5){if(!n)return"";const[i,a]=n.split("@");return!i||!a?n:`${i.slice(0,3)}${"*".repeat(c)}@${a}`}const q={class:"text-sm text-muted"},z={class:"my-5"},F={key:0},U={key:1},W={key:0},G={class:"mt-4 flex items-center gap-3 justify-between"},H={class:"text-sm text-muted"},X=$({__name:"index",setup(n){const c=L(),i=w(),a=A(),d=i.query.email?.toString(),r=S(atob(d??"")),{state:m,executeImmediate:_}=Y(async function(){return await I.sendVerificationEmail({email:r.value,callbackURL:"/token-validation"},{onSuccess:()=>{a.add({color:"success",title:"Success",description:"Email sent successfully"})}})},null);return V(()=>{if(!r.value)throw B({statusCode:400,statusMessage:"We could not verifiy your email due to incomplete data. Try signing up again.",fatal:!0})}),(p,t)=>{const v=C,x=N,g=T,k=M,b=D;return u(),l("div",null,[t[5]||(t[5]=e("h1",{class:"text-lg font-semibold"},"Verify Your Email",-1)),e("div",q," You must verify your email address to continue on "+f(s(c).public.appName)+". ",1),e("div",z,[s(m)?.error?(u(),l("div",F,[o(v,{message:s(m)?.error?.message??s(m)?.error?.statusText,"show-retry":"",onRetry:t[0]||(t[0]=E=>s(_)())},null,8,["message"])])):(u(),l("div",U,[e("div",null,[s(r)?(u(),l("p",W,[e("b",null,f(("maskEmail"in p?p.maskEmail:s(j))(s(r))),1)])):R("",!0),o(x,{variant:"subtle",description:`A verification link has been sent to your email. Click on it to\r
              verify your account.`,icon:"lucide:circle-alert",class:"mt-4"})]),e("div",G,[t[2]||(t[2]=e("p",{class:"text-muted text-sm"},"Didn't receive the email?",-1)),o(g,{"loading-auto":"",label:"Resend",onClick:t[1]||(t[1]=E=>s(_)())})])]))]),e("div",null,[o(k,{class:"my-5"}),e("p",H,[t[4]||(t[4]=y(" Are you experiencing any issues? ",-1)),o(b,{to:"/contact",class:"link"},{default:h(()=>[...t[3]||(t[3]=[y(" Contact us. ",-1)])]),_:1})])])])}}});export{X as default};
