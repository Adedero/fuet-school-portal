import{L as P,M as N,N as A,i as S,o,w as g,O as j,P as L,k as s,Q as M,f as C,c as l,j as k,F as y,r as $,b as c,a as e,t as r,I as T,v as V,R as Y,m as w,S as q,z as I,l as O,g as Q,e as Z}from"#entry";import{_ as z}from"./Br_2l1z2.js";import{_ as D}from"./Bwamz-LN.js";import{_ as R}from"./CSucrOrG.js";import{n as B}from"./Zkazc4B7.js";import{u as E}from"./C1RyDYw7.js";import"./BrTgbP-L.js";const H={base:"animate-pulse rounded-md bg-elevated"},F={__name:"NuxtSkeleton",props:{as:{type:null,required:!1},class:{type:null,required:!1}},setup(p){const n=p,i=P(),u=N(()=>A({extend:A(H),...i.ui?.skeleton||{}}));return(m,d)=>(o(),S(s(M),{as:p.as,"aria-busy":"true","aria-label":"loading","aria-live":"polite",role:"alert",class:L(u.value({class:n.class}))},{default:g(()=>[j(m.$slots,"default")]),_:3},8,["as","class"]))}},J={key:0,class:"grid md:grid-cols-2 lg:grid-cols-4 gap-2.5"},U={key:1},W={key:2,class:"grid md:grid-cols-2 lg:grid-cols-4 gap-2.5"},X={class:"space-y-2.5"},G={class:"font-mono text-3xl md:text-4xl font-semibold"},K={class:"text-xs font-semibold uppercase text-muted"},ee=C({__name:"cards",setup(p){const{data:n,error:i,pending:u,refresh:m}=E("/api/users/admin/dashboard/stats",{lazy:!0},"$4ZB8yovC5B"),d=N(()=>n.value?[{label:"Current Students",value:n.value.activeStudents,icon:"lucide:users",color:"primary"},{label:"Current Staffs",value:n.value.totalStaffs,icon:"lucide:briefcase",color:"neutral"},{label:"Pending applications",value:n.value.pendingApplications,icon:"lucide:file-clock",color:"error"},{label:"Total Departments",value:n.value.totalDepartments,icon:"lucide:building-2",color:"secondary"}]:[]);return(a,f)=>{const _=F,x=z,h=D,b=R;return o(),l("div",null,[s(u)?(o(),l("div",J,[(o(),l(y,null,$(4,t=>c(_,{key:t,class:"w-full h-36"})),64))])):s(i)?(o(),l("div",U,[c(x,{message:("normalizeException"in a?a.normalizeException:s(B))(s(i)).message,"show-retry":"",onRetry:s(m)},null,8,["message","onRetry"])])):k("",!0),s(n)?(o(),l("div",W,[(o(!0),l(y,null,$(s(d),t=>(o(),S(b,{key:t.label},{default:g(()=>[e("div",X,[e("div",null,[c(h,{icon:t.icon,size:"lg",color:t.color,variant:"soft"},null,8,["icon","color"])]),e("div",null,[e("p",G,r(t.value),1)]),e("div",null,[e("p",K,r(t.label),1)])])]),_:2},1024))),128))])):k("",!0)])}}}),te=Object.assign(ee,{__name:"AdminDashboardCards"}),se={key:0,class:"grid gap-2.5"},oe={key:1},ne={key:2,class:"overflow-auto"},ae={class:"w-full text-sm"},le=["onClick"],ce={class:"px-6 py-3 font-medium text-muted"},ie={class:"px-6 py-3"},re={class:"px-6 py-3"},de={class:"px-6 py-3"},ue={class:"px-6 py-3"},me={class:"flex-center gap-1 my-2.5"},_e={class:"text-dimmed text-sm text-center"},pe=C({__name:"recent-applications",setup(p){const{data:n,error:i,pending:u,refresh:m}=E("/api/users/admin/dashboard/recent-applications",{lazy:!0},"$U6SZJwQX4o"),d=a=>{switch(a){case"submitted":return"warning";case"accepted":return"success";case"rejected":return"error";default:return"neutral"}};return(a,f)=>{const _=F,x=z,h=D,b=w;return o(),l("div",null,[s(u)?(o(),l("div",se,[c(_,{class:"h-10"}),c(_,{class:"h-40"})])):s(i)?(o(),l("div",oe,[c(x,{message:`Failed to get recent applications: ${("normalizeException"in a?a.normalizeException:s(B))(s(i)).message}`,"show-retry":"",onRetry:s(m)},null,8,["message","onRetry"])])):s(n)?(o(),l("div",ne,[e("table",ae,[f[0]||(f[0]=e("thead",null,[e("tr",{class:"border-muted border-b bg-muted text-left"},[e("th",{class:"px-6 py-3 font-semibold text-muted"},"#"),e("th",{class:"px-6 py-3 font-semibold text-muted"},"Student Name"),e("th",{class:"px-6 py-3 font-semibold text-muted"},"Program"),e("th",{class:"px-6 py-3 font-semibold text-muted"},"Date"),e("th",{class:"px-6 py-3 font-semibold text-muted"},"Status")])],-1)),e("tbody",null,[(o(!0),l(y,null,$(s(n),t=>(o(),l("tr",{key:t.id,class:"border-b border-muted hover:bg-muted",onClick:v=>("navigateTo"in a?a.navigateTo:s(T))(`/portal/admin/applications/${t.id}`)},[e("td",ce,r(t.id.slice(0,6))+"... ",1),e("td",ie,r(`${t.firstName} ${t.lastName}`),1),e("td",re,r(t.course),1),e("td",de,r(s(V)(t.createdAt,"YYYY-MM-DD")),1),e("td",ue,[c(h,{label:t.status==="submitted"?"pending review":t.status,color:d(t.status),variant:"soft"},null,8,["label","color"])])],8,le))),128))])]),e("div",me,[c(b,{name:"lucide:info",class:"text-dimmed"}),Y(e("p",_e," No data ",512),[[q,!s(n).length]])])])):k("",!0)])}}}),fe=Object.assign(pe,{__name:"AdminDashboardRecentApplications"}),xe={class:"space-y-10 p-8"},he={class:"text-2xl font-semibold text-slate-700"},be={class:"text-slate-600"},ve={class:"space-y-3"},ge={class:"flex items-center justify-between"},ye={class:"p-6 grid grid-cols-2 md:grid-cols-4 gap-4"},$e={class:"flex-col-center gap-2.5"},ke={class:"text-sm font-semibold text-muted"},Re=C({__name:"index",setup(p){const n=O(),i=I(),u=[{label:"Review Applications",to:"/portal/admin/applications",icon:"lucide:user-check"},{label:"Process Payments",icon:"lucide:credit-card"},{label:"Manage Courses",to:"/portal/admin/courses",icon:"lucide:book-open"},{label:"Add Events",icon:"lucide:calendar"}],m=N(()=>{const d=(i.user.value?.name??"").split(" ");return`${d[0]} ${d.at(-1)}`});return(d,a)=>{const f=te,_=Q,x=fe,h=w,b=R,t=Z;return o(),l("div",xe,[e("div",null,[e("h1",he," Welcome back, "+r(s(m).split(" ")[0]),1),e("p",be," Here's what's happening at "+r(s(n).public.schoolNameShort)+" today ",1)]),e("div",null,[c(f)]),e("div",ve,[e("div",ge,[a[0]||(a[0]=e("div",null,[e("h2",{class:"text-lg font-semibold"},"Recent Applications"),e("p",{class:"text-sm text-muted"},"Latest admission applications")],-1)),c(_,{to:"/portal/admin/applications",label:"View All",size:"sm",variant:"subtle"})]),c(x)]),e("div",null,[a[1]||(a[1]=e("div",{class:""},[e("h2",{class:"text-lg font-semibold"},"Quick Actions"),e("p",{class:"text-sm text-muted"},"Common administrative tasks")],-1)),e("div",ye,[(o(),l(y,null,$(u,v=>c(t,{key:v.label,to:v.to},{default:g(()=>[c(b,{variant:"subtle",class:"hover:scale-105 transition-transform"},{default:g(()=>[e("div",$e,[c(h,{name:v.icon,size:"1.25rem"},null,8,["name"]),e("p",ke,r(v.label),1)])]),_:2},1024)]),_:2},1032,["to"])),64))])])])}}});export{Re as default};
